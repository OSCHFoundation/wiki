# 交易 Transactions
概念：交易（事务）是修改分账本状态的命令，用于发送付款，将订单输入到分布式交易所，更改账户设置，授权用户持有你的信用币。将oschain看成数据库，则交易即是sql命令。

交易包含
1. 源账号：交易必须由该账号签署，交易费用由该账号出，序列号也给予该账号。
2. 费用：每笔交易都要支付一定量的费用，当交易低于最低费用时候交易将失败。
3. 序列号：每个交易都有一个序列号，在处理每个用户交易时候都遵守严格的排序顺序。要使交易有效，交易序列号必须比源账户记录的序列号大1，在交易成功之后源账号的记录也将加1.
4. 操作列表（要么全部成功，要么全部失败）:交易中可以包括一个操作也可以包括多个操作，但最多100个操作，按照事务执行acid事务集，这意味着要么应用所有操作，要么不应用任何操作。如果失败则整个任务集失败。如果操作涉及原账户以外账户，则需要以外账户进行签名。
5. 签名列表（可能涉及多个账户，就需要多个签名）：一个事务做多可以附加20个签名，如果一个事务包含一个多余签名，此事务将会视为无效，不允许使用多余签名。
6. 时间范围： 设置有效时间
7.  说明（memo）： 可以可选的额外说明，客户有责任填写这个人，说明有下面几种类型。
  1. MEMO_TEXT： 一个encode编码
  2. MEMO_ID：  64位整型
  3. MEMO_HASH： 
  4. MEMO_RETURN： 


# 事务集
在分类帐关闭之间，网络中的所有节点都在收集事务。当需要关闭下一个分类帐时，节点将这些事务收集到一个事务集中。SCP由网络运行，以达成协议，将哪个交易集应用到最后一个分类帐上。

## 生命周期
1. 创建：用户创建一个事务，填写所有字段，给出正确的序列号，添加任何想要的操作。
2. 签名：一旦事务被填满，所有必需的签名都必须被收集并添加到交易信封中。通常，这只是交易帐户的签名，但是更复杂的设置可能需要从多个参与方收集签名。
3. 提交：在签署之后，事务应该是有效的，现在可以提交给恒星网络。事务通常是使用horizon提交的，但是您也可以直接将事务提交给OpenSourceChain的实例。
4. 广播：一旦OpenSourceChain收到一个事务，或者由用户或另一个节点提供给它，它会进行初步检查，以确定交易是否有效。它确保交易正确地形成，并且源帐户有足够的钱来支付交易费用。OpenSourceChain不会检查那些需要检查分类帐的状态的如源账户数据。  例如目标账户是否存在和源账户是否有交易的资产， 如果初步检查通过，则OpenSourceChain将事务传播给它所连接的所有其他服务器。通过这种方式，一个有效的事务被扩散到整个恒星网络中。
5. 收集到交易集中：当需要关闭总账的时候，OpenSourceChain将从上个分类帐关闭后所听到的所有交易，并将它们收集到一个交易集中。如果它现在听到任何进入的交易，它就会把它们放在旁边的下一个分类帐上。OpenSourceChain指定它收集的事务集。SCP解决了所提议的各种事务集之间的差异，并决定网络将应用的一个事务集。
6. 应用：一旦SCP就特定交易集合达成一致，该集合将应用于分类账。 此时，从该账户为该组中的每笔交易收取费用。 按照它们在事务中发生的顺序尝试操作。 如果任何操作失败，则该事务将失败，并且该事务中先前操作的效果会回滚。 在应用了集合中的所有事务之后，将创建新的分类帐并重新开始此过程。
